const gridSize=15,grid=document.querySelector(".grid"),squares=document.getElementsByClassName("square"),appleCountDisplay=document.getElementById("apple-count"),scoreDisplay=document.getElementById("score"),overlay=document.querySelector(".overlay"),playerName=document.getElementById("player-name"),leaderboard=document.querySelector(".table");let direction,intervalTime,timerId,appleCount,score,players,currentSnake=[0,1,2],appleIndex=6,speed=.95;function createGrid(){for(let e=0;e<225;e++){const e=document.createElement("div");grid.appendChild(e),e.classList.add("square")}}function setupGame(){document.removeEventListener("keydown",saveScore),overlay.style.display="none",currentSnake.forEach((e=>squares[e].classList.remove("snake"))),squares[appleIndex].innerHTML="",clearInterval(timerId),currentSnake=[0,1,2],direction=1,intervalTime=1e3,appleCount=0,score=0,appleCountDisplay.textContent=appleCount,scoreDisplay.textContent=score,currentSnake.forEach((e=>squares[e].classList.add("snake"))),document.addEventListener("keydown",startGame)}function generateApple(){do{appleIndex=Math.floor(Math.random()*squares.length)}while(squares[appleIndex].classList.contains("snake"));squares[appleIndex].innerHTML='<img src="apple.b8f2e1e0.svg" alt="apple-icon" class="apple">'}function startGame(e){"Enter"===e.key&&(document.removeEventListener("keydown",startGame),document.addEventListener("keydown",controlGame),timerId=setInterval(move,intervalTime),generateApple())}function move(){let e,r,a=currentSnake[currentSnake.length-1];if(a+15>=225&&15===direction||a%15==14&&1===direction||a%15==0&&-1===direction||a-15<0&&-15===direction||squares[a+direction].classList.contains("snake"))return playerName.value="",overlay.style.display="block",playerName.focus(),document.addEventListener("keydown",saveScore),void clearInterval(timerId);currentSnake.push(a+direction),e=currentSnake[currentSnake.length-1],r=currentSnake.shift(),squares[e].classList.add("snake"),squares[r].classList.remove("snake"),squares[e].firstElementChild&&(squares[e].innerHTML="",currentSnake.unshift(r),squares[r].classList.add("snake"),appleCount++,score=5*appleCount,appleCountDisplay.textContent=appleCount,scoreDisplay.textContent=score,generateApple(),clearInterval(timerId),intervalTime>200&&(intervalTime*=speed),timerId=setInterval(move,intervalTime))}function controlGame(e){switch(e.key){case"ArrowRight":direction=1;break;case"ArrowLeft":direction=-1;break;case"ArrowDown":direction=15;break;case"ArrowUp":direction=-15}}function saveScore(e){if("Enter"===e.key){let e=JSON.parse(localStorage.getItem("players"));players=e||[],players.push({name:playerName.value?playerName.value:"Anonymous",score:score}),players.sort(((e,r)=>e.score>=r.score?0:e.score<r.score?1:void 0)),players.splice(10,1),localStorage.setItem("players",JSON.stringify(players)),updateLeaderboard(),setupGame()}}function updateLeaderboard(){let e="";players.forEach(((r,a)=>{e+=`\n            <p>${a+1}</p>\n            <p>${r.name}</p>\n            <p class="score">${r.score} pts</p>\n        `})),leaderboard.innerHTML=e}window.onload=()=>{let e=JSON.parse(localStorage.getItem("players"));players=e||[],updateLeaderboard()},createGrid(),setupGame();
//# sourceMappingURL=index.65bb4a49.js.map
